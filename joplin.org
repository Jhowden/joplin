flexible migrations and seeds on top of ragtime
support for postgresql, elasticsearch and zookeeper

* configuration

:joplin {
  :migrators {
    :pz-psql "migrators/psql"
    :pz-es   "migrators/es"
  }
  :seeds {
    :pz-psql-dev     "seeds.psql-dev/run"
    :pz-psql-staging "seeds.psql-stg/run"
    :pz-es-dev       "seeds.es-dev/run"
    :pz-settings-dev "settings.dev/run"
  }
  :databases {
    :psql-dev      {:type :jdbc, :url "jdbc:postgresql://.../am_pz"}
    :psql-local    {:type :jdbc, :url "jdbc:postgresql://localhost.../am_pz"}
    :psql-test     {:type :jdbc, :url "jdbc:postgresql://localhost.../am_pz_test"}
    :es-dev        {:type :es, :host "foo", :port 9200}
    :zk-dev        {:type :zk, :host "foo", :port 2181}
  }
  :environments {
    :dev           [{:db psql-dev, :migrator :pz-sql, :seed pz-psql dev}
                    {:db es-dev, :migrator pz-es-dev}
                    {:db zk-dev, :seed pz-settings-dev}
                    {:db s3 "]
    :test          [{...}]
    :staging       []
    :production    []
  }
}

* migrations

** lein migrate environment/db
*** lein migrate dev
*** lein migrate psql-local
*** lein migrate test
*** lein migrate staging

** lein rollback environment/db [N]
*** lein rollback psql-dev
*** lein rollback psql-dev
*** lein rollback staging 2

* data seeds
** lein seed environment/db seed
*** lein seed psql-dev
*** lein seed test
*** lein seed zk-dev

You have 2 pending migrations:
  20140711115642 CreateProducts
  20140711121516 CreateUsers

There is no rolling back of seeds

* ops

** lein reset environment/db
*** lein reset psql-dev
*** lein reset es-dev

migrate down all, up all, seed
(migrate down all should remove all seed data because tables/keys are removed)
